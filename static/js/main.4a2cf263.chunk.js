(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(29)},21:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),l=(n(21),n(2)),i=n(3),s=n(6),u=n(5),h=n(7),m=n(34),f=n(33),p=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home-page txt-center"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",{class:"text-color"},"Hello!"),r.a.createElement("p",null,"Good to see you here")))}}]),t}(a.Component),d=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={profile:null,error:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadUserProfile()}},{key:"loadUserProfile",value:function(){var e=this;this.props.auth.getProfile(function(t,n){return e.setState({profile:t,error:n})})}},{key:"render",value:function(){var e=this.state.profile;return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-page"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",{class:"text-color txt-center"},"Welcome"),r.a.createElement("div",{className:"fl"},r.a.createElement("img",{style:{maxWidth:200,maxHeight:200,borderRadius:50,position:"relative",top:25},src:e.picture,alt:"profile pic"})),r.a.createElement("div",{className:"fr"},r.a.createElement("pre",null,JSON.stringify(e,null,2)))))):null}}]),t}(a.Component),g=n(31),b=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,n=e.login,a=e.logout;return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(g.a,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(g.a,{to:"/profile"},"Profile")),r.a.createElement("li",{className:"login"},r.a.createElement("button",{className:"login-btn",onClick:t()?a:n},t()?"Log Out":"Log In"))))}}]),t}(a.Component),v=n(15),E=function(){function e(t){var n=this;Object(l.a)(this,e),this.login=function(){n.auth0.authorize()},this.handleAuthentication=function(){n.auth0.parseHash(function(e,t){t&&t.accessToken&&t.idToken?(n.setSession(t),n.history.push("/")):e&&(n.history.push("/"),alert("Error: ".concat(e.error,". Check the console for further details.")),console.log(e))})},this.setSession=function(e){console.log(e);var t=JSON.stringify(1e3*e.expiresIn+(new Date).getTime());localStorage.setItem("access_token",e.accessToken),localStorage.setItem("id_token",e.idToken),localStorage.setItem("expires_at",t)},this.logout=function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),n.userProfile=null,n.auth0.logout({clientID:"",returnTo:"http://localhost:3000"})},this.getAccessToken=function(){var e=localStorage.getItem("access_token");if(!e)throw new Error("No access token found.");return e},this.getProfile=function(e){if(n.userProfile)return e(n.userProfile);n.auth0.client.userInfo(n.getAccessToken(),function(t,a){a&&(n.userProfile=a),e(a,t)})},this.history=t,this.userProfile=null,this.auth0=new v.a.WebAuth({domain:"",clientID:"",redirectUri:"http://localhost:3000/callback",responseType:"token id_token",scope:"openid profile email"})}return Object(i.a)(e,[{key:"isAuthenticated",value:function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}}]),e}(),O=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){if(!/access_token|id_token|error/.test(n.props.location.hash))throw new Error("Invalid callback URL.");n.props.auth.handleAuthentication()},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"Loading...")}}]),t}(a.Component),k=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).auth=new E(n.props.history),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{auth:this.auth}),r.a.createElement("div",{className:"body"},r.a.createElement(m.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(p,Object.assign({auth:e.auth},t))}}),r.a.createElement(m.a,{path:"/callback",render:function(t){return r.a.createElement(O,Object.assign({auth:e.auth},t))}}),r.a.createElement(m.a,{path:"/profile",render:function(t){return e.auth.isAuthenticated()?r.a.createElement(d,Object.assign({auth:e.auth},t)):r.a.createElement(f.a,{to:"/"})}})))}}]),t}(a.Component),j=n(32);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(j.a,null,r.a.createElement(m.a,{component:k})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,2,1]]]);
//# sourceMappingURL=main.4a2cf263.chunk.js.map